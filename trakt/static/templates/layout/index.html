<md-content class="md-padding" layout-fill ng-if="vm.deliveries.length">
	<section layout="column" class="md-padding">
		<div layout="column" flex>
			<h1 ng-show="vm.deliveries && vm.deliveries.length" flex='33' layout-fill>Current Deliveries</h1>
			<br>
			<label>Stream tags</label>
			<md-chips ng-model="vm.streams" placeholder="Add a stream to view below">
			</md-chips>
			<md-input-container ng-show="vm.deliveries && vm.deliveries.length">
				<label>Filter</label>
				<input ng-model="search">
			</md-input-container>
		</div>
	<!-- FILTER AND CHIPS -->
	<div layout="row" class="md-padding">
	</div>
	</section>
	<!-- End FILTER AND CHIPS -->
	<!-- Deliveries main content -->
	<div layout="column" layout-align="end end" ng-init="start=0">
		<div flex>
		    <md-button class="md-fab md-raised md-mini" ng-click="start=start-3" ng-disabled="!start"><</md-button>
		    <md-button class="md-fab md-raised md-mini" ng-click="start=start+3" ng-disabled="start>vm.streams.length-4">></md-button>
		</div>	
		<md-list layout="row" layout-fill>
			<!-- Streams loop -->		
			<div class="stream-div md-whiteframe-z4 stream-box" ng-repeat="stream in vm.streams | filter: stream | startFrom: start | limitTo: 3" class="stream" ng-animate="'animate'" ng-hide="!filtered.length" flex>
					<h3 class="streamname">
						{{stream | uppercase}}
					</h3>
		        <div layout="row" layout-wrap>
		        	<!-- Deliveries loop -->
					<div ng-repeat="delivery in filtered = (vm.deliveries | filter:stream | filter:search | orderBy:'updated_at')"
						 flex='100'>
						<delivery delivery="delivery" vm="vm" ng-show="vm.deliveries && vm.deliveries.length"></delivery>
					</div><!-- End Deliveries loop -->
		        </div><!-- End Streams loop -->
			</div>
	    </md-list>
	</div>
</md-content>

<!-- Show Add button only when authenticated -->
<a class="btn btn-primary btn-fab btn-raised mdi-content-add btn-add-new-delivery"
	href="javascript:void(0)"
	ng-click="vm.setDetails(None)"
	ng-show="vm.isAuthenticated"
	ng-dialog="/static/templates/deliveries/delivery-action.html"
	ng-dialog-controller="DeliveryController as vm">
	<md-tooltip>
	    Create Delivery
    </md-tooltip>
</a>
