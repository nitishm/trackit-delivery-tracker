<md-content class="md-padding" layout-fill ng-if="vm.deliveries.length">
	<section layout="column" class="md-padding">
	<div layout="row" layout-fill>
		<h1 ng-show="vm.deliveries && vm.deliveries.length" flex='33' layout-fill style="font-size: 70px;font-family: monospace; font-variant: small-caps;">Current Deliveries</h1>
		<div layout="column" flex>
			<div flex='50'>
				<label>Stream tags</label>
				<md-chips ng-model="vm.streams" placeholder="Add a stream to view below">
				</md-chips>
			</div>
			<md-input-container ng-show="vm.deliveries && vm.deliveries.length" flex='50'>
				<label>Filter</label>
				<input ng-model="search">
			</md-input-container>
		</div>
	</div>
	<!-- FILTER AND CHIPS -->
	<div layout="row" class="md-padding">
	</div>
	</section>
	<!-- End FILTER AND CHIPS -->
	<!-- Deliveries main content -->
	<div layout="column" layout-align="end end">
		<div flex>
		    <md-button class="md-fab md-raised md-mini"><</md-button>
		    <md-button class="md-fab md-raised md-mini">></md-button>
		</div>	
		<md-list layout="row" layout-fill>
			<!-- Streams loop -->		
			<div ng-repeat="stream in vm.streams | filter: stream | limitTo: 3" class="stream" ng-animate="'animate'" ng-hide="!filtered.length" flex>
					<md-subheader class="streamname">
						<span class="md-toolbar">{{stream | uppercase}}</span>
					</md-subheader>
		        <div layout="row" layout-wrap>
		        	<!-- Deliveries loop -->
					<div ng-repeat="delivery in filtered = (vm.deliveries | filter:stream | filter:search | orderBy:'updated_at')"
						 flex='100'>
						<delivery delivery="delivery" vm="vm" ng-show="vm.deliveries && vm.deliveries.length"></delivery>
					</div><!-- End Deliveries loop -->
		        </div><!-- End Streams loop -->
			</div>
	    </md-list>
	</div>
	<!-- Show Add button only when authenticated -->
	<a class="btn btn-primary btn-fab btn-raised mdi-content-add btn-add-new-delivery"
		href="javascript:void(0)"
		ng-click="vm.setDetails(None)"
		ng-show="vm.isAuthenticated"
		ng-dialog="/static/templates/deliveries/delivery-action.html"
		ng-dialog-controller="DeliveryController as vm">
		<md-tooltip>
		    Create Delivery
	    </md-tooltip>
	</a>
</md-content>
